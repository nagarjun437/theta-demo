{"ast":null,"code":"var _jsxFileName = \"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/theta-demo/src/app/views/app/task-manager/todo/TodoList.jsx\";\nimport React, { Component } from \"react\";\nimport TodoItem from \"./TodoItem\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { getAllTodo, updateTodoById, reorderTodoList, getAllTodoTag } from \"./todoService\";\nimport { Button, Card, Dropdown } from \"react-bootstrap\";\nimport { MdArrowDropDown, MdLabel } from \"react-icons/md\";\n\nclass TodoList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.todoList = [];\n    this.state = {\n      tagList: [],\n      todoList: []\n    };\n\n    this.search = query => {\n      query = query.toLowerCase();\n      let filteredTodoList = this.todoList.filter(todo => todo.title.toLowerCase().match(query) || todo.note.toLowerCase().match(query));\n      this.setState({\n        todoList: [...filteredTodoList]\n      });\n    };\n\n    this.updateTodo = todo => {\n      updateTodoById(todo).then(({\n        data\n      }) => {\n        this.setState({\n          todoList: [...data]\n        });\n        this.todoList = [...data];\n      });\n    };\n\n    this.reorder = (list, startIndex, endIndex) => {\n      const result = Array.from(list);\n      const [removed] = result.splice(startIndex, 1);\n      result.splice(endIndex, 0, removed);\n      return result;\n    };\n\n    this.handleDragEnd = result => {\n      // dropped outside the list\n      if (!result.destination) {\n        return;\n      }\n\n      let todoList = this.reorder(this.state.todoList, result.source.index, result.destination.index);\n      reorderTodoList(todoList).then(({\n        data\n      }) => {\n        this.setState({\n          todoList: [...data]\n        });\n        this.todoList = [...data];\n      });\n    };\n\n    this.filterTodoListByProperty = (queryField, queryValue) => {\n      if (queryField !== \"all\") {\n        this.setState({\n          todoList: [...this.todoList.filter(todo => todo[queryField] === queryValue)]\n        });\n      } else {\n        this.setState({\n          todoList: [...this.todoList]\n        });\n      }\n    };\n\n    this.filterTodoListByTag = tagId => {\n      if (tagId !== \"all\") this.setState({\n        todoList: [...this.todoList.filter(todo => todo.tag.includes(tagId))]\n      });else {\n        this.setState({\n          todoList: [...this.todoList]\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.props.setSearchFunction(this.search);\n    getAllTodo().then(({\n      data\n    }) => {\n      getAllTodoTag().then(({\n        data: tagList\n      }) => {\n        this.setState({\n          tagList,\n          todoList: [...data]\n        });\n        this.todoList = [...data];\n      });\n    });\n  }\n\n  render() {\n    let {\n      todoList,\n      tagList\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Card, {\n      className: \"todo position-relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"todo-list__topbar card-header py-2 d-flex flex-wrap justify-content-between align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex ml-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n      as: \"span\",\n      className: \"toggle-hidden cursor-pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 btn-hover rounded-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MdArrowDropDown, {\n      size: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"all\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, \"All\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"read\", true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, \"Read\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"read\", false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, \"Unread\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"done\", true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, \"Done\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"done\", false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, \"Undone\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"important\", true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, \"Important\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"important\", false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, \"Unimportant\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"starred\", true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, \"Starred\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.filterTodoListByProperty(\"starred\", false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }, \"Unstarred\"))), /*#__PURE__*/React.createElement(Dropdown, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n      as: \"span\",\n      className: \"toggle-hidden cursor-pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 btn-hover rounded-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MdLabel, {\n      size: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n      className: \"text-capitalize\",\n      onClick: () => this.filterTodoListByTag(\"all\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, \"all\"), tagList.map(tag => /*#__PURE__*/React.createElement(Dropdown.Item, {\n      key: tag.id,\n      className: \"text-capitalize\",\n      onClick: () => this.filterTodoListByTag(tag.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    }, tag.name))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pr-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.props.history.push(\"/todo/list/add\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }, \"Create Todo\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"todo-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(DragDropContext, {\n      onDragEnd: this.handleDragEnd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Droppable, {\n      droppableId: \"droppable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }\n    }, (provided, snapshot) => /*#__PURE__*/React.createElement(\"div\", Object.assign({}, provided.droppableProps, {\n      ref: provided.innerRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }), todoList.map((todo, index) => /*#__PURE__*/React.createElement(Draggable, {\n      key: todo.id,\n      draggableId: todo.id.toString(),\n      index: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 21\n      }\n    }, (provided, snapshot) => /*#__PURE__*/React.createElement(\"div\", Object.assign({\n      ref: provided.innerRef\n    }, provided.draggableProps, {\n      style: provided.draggableProps.style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(TodoItem, {\n      tagList: tagList,\n      updateTodo: this.updateTodo,\n      key: index,\n      todo: todo,\n      dragHandleProps: provided.dragHandleProps,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 27\n      }\n    })))), provided.placeholder)))));\n  }\n\n}\n\nexport default TodoList;","map":{"version":3,"sources":["/Users/arjun/Documents/Personal/Test/Theta/UI Theme/theta-demo/src/app/views/app/task-manager/todo/TodoList.jsx"],"names":["React","Component","TodoItem","DragDropContext","Droppable","Draggable","getAllTodo","updateTodoById","reorderTodoList","getAllTodoTag","Button","Card","Dropdown","MdArrowDropDown","MdLabel","TodoList","todoList","state","tagList","search","query","toLowerCase","filteredTodoList","filter","todo","title","match","note","setState","updateTodo","then","data","reorder","list","startIndex","endIndex","result","Array","from","removed","splice","handleDragEnd","destination","source","index","filterTodoListByProperty","queryField","queryValue","filterTodoListByTag","tagId","tag","includes","componentDidMount","props","setSearchFunction","render","map","id","name","history","push","provided","snapshot","droppableProps","innerRef","toString","draggableProps","style","dragHandleProps","placeholder"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TodoItem from \"./TodoItem\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport {\n  getAllTodo,\n  updateTodoById,\n  reorderTodoList,\n  getAllTodoTag\n} from \"./todoService\";\nimport { Button, Card, Dropdown } from \"react-bootstrap\";\nimport { MdArrowDropDown, MdLabel } from \"react-icons/md\";\n\nclass TodoList extends Component {\n  todoList = [];\n  state = {\n    tagList: [],\n    todoList: []\n  };\n\n  componentDidMount() {\n    this.props.setSearchFunction(this.search);\n    getAllTodo().then(({ data }) => {\n      getAllTodoTag().then(({ data: tagList }) => {\n        this.setState({\n          tagList,\n          todoList: [...data]\n        });\n        this.todoList = [...data];\n      });\n    });\n  }\n\n  search = query => {\n    query = query.toLowerCase();\n    let filteredTodoList = this.todoList.filter(\n      todo =>\n        todo.title.toLowerCase().match(query) ||\n        todo.note.toLowerCase().match(query)\n    );\n    this.setState({\n      todoList: [...filteredTodoList]\n    });\n  };\n\n  updateTodo = todo => {\n    updateTodoById(todo).then(({ data }) => {\n      this.setState({\n        todoList: [...data]\n      });\n      this.todoList = [...data];\n    });\n  };\n\n  reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n\n    return result;\n  };\n\n  handleDragEnd = result => {\n    // dropped outside the list\n    if (!result.destination) {\n      return;\n    }\n\n    let todoList = this.reorder(\n      this.state.todoList,\n      result.source.index,\n      result.destination.index\n    );\n\n    reorderTodoList(todoList).then(({ data }) => {\n      this.setState({\n        todoList: [...data]\n      });\n      this.todoList = [...data];\n    });\n  };\n\n  filterTodoListByProperty = (queryField, queryValue) => {\n    if (queryField !== \"all\") {\n      this.setState({\n        todoList: [\n          ...this.todoList.filter(todo => todo[queryField] === queryValue)\n        ]\n      });\n    } else {\n      this.setState({\n        todoList: [...this.todoList]\n      });\n    }\n  };\n\n  filterTodoListByTag = tagId => {\n    if (tagId !== \"all\")\n      this.setState({\n        todoList: [...this.todoList.filter(todo => todo.tag.includes(tagId))]\n      });\n    else {\n      this.setState({\n        todoList: [...this.todoList]\n      });\n    }\n  };\n\n  render() {\n    let { todoList, tagList } = this.state;\n\n    return (\n      <Card className=\"todo position-relative\">\n        <div className=\"todo-list__topbar card-header py-2 d-flex flex-wrap justify-content-between align-items-center\">\n          <div className=\"d-flex ml-3\">\n            <Dropdown>\n              <Dropdown.Toggle\n                as=\"span\"\n                className=\"toggle-hidden cursor-pointer\"\n              >\n                <div className=\"p-2 btn-hover rounded-circle\">\n                  <MdArrowDropDown size={24}></MdArrowDropDown>\n                </div>\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                <Dropdown.Item\n                  onClick={() => this.filterTodoListByProperty(\"all\")}\n                >\n                  All\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.filterTodoListByProperty(\"read\", true)}\n                >\n                  Read\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.filterTodoListByProperty(\"read\", false)}\n                >\n                  Unread\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.filterTodoListByProperty(\"done\", true)}\n                >\n                  Done\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.filterTodoListByProperty(\"done\", false)}\n                >\n                  Undone\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() =>\n                    this.filterTodoListByProperty(\"important\", true)\n                  }\n                >\n                  Important\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() =>\n                    this.filterTodoListByProperty(\"important\", false)\n                  }\n                >\n                  Unimportant\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.filterTodoListByProperty(\"starred\", true)}\n                >\n                  Starred\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() =>\n                    this.filterTodoListByProperty(\"starred\", false)\n                  }\n                >\n                  Unstarred\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n\n            <Dropdown>\n              <Dropdown.Toggle\n                as=\"span\"\n                className=\"toggle-hidden cursor-pointer\"\n              >\n                <div className=\"p-2 btn-hover rounded-circle\">\n                  <MdLabel size={24}></MdLabel>\n                </div>\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                <Dropdown.Item\n                  className=\"text-capitalize\"\n                  onClick={() => this.filterTodoListByTag(\"all\")}\n                >\n                  all\n                </Dropdown.Item>\n                {tagList.map(tag => (\n                  <Dropdown.Item\n                    key={tag.id}\n                    className=\"text-capitalize\"\n                    onClick={() => this.filterTodoListByTag(tag.id)}\n                  >\n                    {tag.name}\n                  </Dropdown.Item>\n                ))}\n              </Dropdown.Menu>\n            </Dropdown>\n          </div>\n          <div className=\"pr-3\">\n            <Button\n              variant=\"primary\"\n              onClick={() => this.props.history.push(\"/todo/list/add\")}\n            >\n              Create Todo\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"todo-list\">\n          <DragDropContext onDragEnd={this.handleDragEnd}>\n            <Droppable droppableId=\"droppable\">\n              {(provided, snapshot) => (\n                <div {...provided.droppableProps} ref={provided.innerRef}>\n                  {todoList.map((todo, index) => (\n                    <Draggable\n                      key={todo.id}\n                      draggableId={todo.id.toString()}\n                      index={index}\n                    >\n                      {(provided, snapshot) => (\n                        <div\n                          ref={provided.innerRef}\n                          {...provided.draggableProps}\n                          style={provided.draggableProps.style}\n                        >\n                          <TodoItem\n                            tagList={tagList}\n                            updateTodo={this.updateTodo}\n                            key={index}\n                            todo={todo}\n                            dragHandleProps={provided.dragHandleProps}\n                          />\n                        </div>\n                      )}\n                    </Draggable>\n                  ))}\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n        </div>\n      </Card>\n    );\n  }\n}\n\nexport default TodoList;\n"]},"metadata":{},"sourceType":"module"}