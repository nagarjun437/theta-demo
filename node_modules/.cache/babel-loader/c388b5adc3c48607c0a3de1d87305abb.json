{"ast":null,"code":"import _regeneratorRuntime from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Breadcrumb,SimpleCard}from\"@gull\";import ReactCrop from\"react-image-crop\";import{Button}from\"react-bootstrap\";var AppImageCropper=/*#__PURE__*/function(_Component){_inherits(AppImageCropper,_Component);var _super=_createSuper(AppImageCropper);function AppImageCropper(){var _this;_classCallCheck(this,AppImageCropper);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={src:\"/assets/images/photo-wide-3.jpg\",crop:{aspect:1/1},img:null};_this.handleFileSelect=function(event){var file=event.target.files[0];var src=URL.createObjectURL(file);_this.setState({src:src});};_this.handleCrop=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,crop,img,croppedImage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,crop=_this$state.crop,img=_this$state.img;if(img){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.next=5;return _this.getCroppedImg(img,crop,\"test\");case 5:croppedImage=_context.sent;_this.setState({src:URL.createObjectURL(croppedImage)});case 7:case\"end\":return _context.stop();}}},_callee);}));_this.getCroppedImg=function(image,crop,fileName){var canvas=document.createElement(\"canvas\");var scaleX=image.naturalWidth/image.width;var scaleY=image.naturalHeight/image.height;canvas.width=crop.width;canvas.height=crop.height;var ctx=canvas.getContext(\"2d\");ctx.drawImage(image,crop.x*scaleX,crop.y*scaleY,crop.width*scaleX,crop.height*scaleY,0,0,crop.width,crop.height);// As Base64 string\n// const base64Image = canvas.toDataURL('image/jpeg');\n// As a blob\nreturn new Promise(function(resolve,reject){canvas.toBlob(function(blob){blob.name=fileName;resolve(blob);},\"image/jpeg\",1);});};return _this;}_createClass(AppImageCropper,[{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,src=_this$state2.src,crop=_this$state2.crop;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Breadcrumb,{routeSegments:[{name:\"Home\",path:\"/\"},{name:\"Extra Kits\",path:\"/extra-kits\"},{name:\"Image Cropper\"}]}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"upload-single-file\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-rounded mr-3 mb-3\",as:\"span\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-middle\"},/*#__PURE__*/React.createElement(\"i\",{className:\"i-Share-on-Cloud\"},\" \"),/*#__PURE__*/React.createElement(\"span\",null,\"Single File\")))),/*#__PURE__*/React.createElement(\"input\",{className:\"d-none\",onChange:this.handleFileSelect,id:\"upload-single-file\",type:\"file\",accept:\"image/*\"}),/*#__PURE__*/React.createElement(Button,{onClick:this.handleCrop,className:\"btn-rounded mb-3\"},\"Crop Image\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-block\"},/*#__PURE__*/React.createElement(ReactCrop,{src:src,crop:crop,circularCrop:true,onImageLoaded:function onImageLoaded(image){return _this2.setState({img:image});},onChange:function onChange(newCrop){_this2.setState({crop:newCrop});}})));}}]);return AppImageCropper;}(Component);export default AppImageCropper;","map":{"version":3,"sources":["/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/src/app/views/extra-kits/AppImageCropper.jsx"],"names":["React","Component","Breadcrumb","SimpleCard","ReactCrop","Button","AppImageCropper","state","src","crop","aspect","img","handleFileSelect","event","file","target","files","URL","createObjectURL","setState","handleCrop","getCroppedImg","croppedImage","image","fileName","canvas","document","createElement","scaleX","naturalWidth","width","scaleY","naturalHeight","height","ctx","getContext","drawImage","x","y","Promise","resolve","reject","toBlob","blob","name","path","newCrop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Breadcrumb, SimpleCard } from \"@gull\";\nimport ReactCrop from \"react-image-crop\";\nimport { Button } from \"react-bootstrap\";\n\nclass AppImageCropper extends Component {\n  state = {\n    src: \"/assets/images/photo-wide-3.jpg\",\n    crop: { aspect: 1 / 1 },\n    img: null\n  };\n\n  handleFileSelect = event => {\n    let file = event.target.files[0];\n    let src = URL.createObjectURL(file);\n    this.setState({\n      src\n    });\n  };\n\n  handleCrop = async () => {\n    let { crop, img } = this.state;\n    if (!img) return;\n\n    let croppedImage = await this.getCroppedImg(img, crop, \"test\");\n    this.setState({ src: URL.createObjectURL(croppedImage) });\n  };\n\n  getCroppedImg = (image, crop, fileName) => {\n    const canvas = document.createElement(\"canvas\");\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n\n    canvas.width = crop.width;\n    canvas.height = crop.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      0,\n      0,\n      crop.width,\n      crop.height\n    );\n\n    // As Base64 string\n    // const base64Image = canvas.toDataURL('image/jpeg');\n\n    // As a blob\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(\n        blob => {\n          blob.name = fileName;\n          resolve(blob);\n        },\n        \"image/jpeg\",\n        1\n      );\n    });\n  };\n\n  render() {\n    let { src, crop } = this.state;\n\n    return (\n      <div>\n        <Breadcrumb\n          routeSegments={[\n            { name: \"Home\", path: \"/\" },\n            { name: \"Extra Kits\", path: \"/extra-kits\" },\n            { name: \"Image Cropper\" }\n          ]}\n        ></Breadcrumb>\n        <label htmlFor=\"upload-single-file\">\n          <Button className=\"btn-rounded mr-3 mb-3\" as=\"span\">\n            <div className=\"flex flex-middle\">\n              <i className=\"i-Share-on-Cloud\"> </i>\n              <span>Single File</span>\n            </div>\n          </Button>\n        </label>\n        <input\n          className=\"d-none\"\n          onChange={this.handleFileSelect}\n          id=\"upload-single-file\"\n          type=\"file\"\n          accept=\"image/*\"\n        />\n\n        <Button onClick={this.handleCrop} className=\"btn-rounded mb-3\">\n          Crop Image\n        </Button>\n\n        <div className=\"d-block\">\n          <ReactCrop\n            src={src}\n            crop={crop}\n            circularCrop={true}\n            onImageLoaded={image => this.setState({ img: image })}\n            onChange={newCrop => {\n              this.setState({ crop: newCrop });\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AppImageCropper;\n"]},"metadata":{},"sourceType":"module"}