{"ast":null,"code":"import _toConsumableArray from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Card,Button,Dropdown,FormControl,FormGroup,FormLabel}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{getTodoById,getAllTodoTag,updateTodoById,deleteTodo,addTodo}from\"./todoService\";import DatePicker from\"react-datepicker\";import{Formik}from\"formik\";import*as yup from\"yup\";import{MdArrowBack,MdDrafts,MdMarkunread,MdError,MdErrorOutline,MdStar,MdStarBorder,MdLibraryAdd,MdLabel,MdDelete,MdClose}from\"react-icons/md\";import{GullTooltip}from\"@gull\";import TagDialog from\"./TagDialog\";var TodoEditor=/*#__PURE__*/function(_Component){_inherits(TodoEditor,_Component);var _super=_createSuper(TodoEditor);function TodoEditor(){var _this;_classCallCheck(this,TodoEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={todo:{title:\"\",note:\"\",done:false,read:false,starred:false,important:false,startDate:new Date(),dueDate:new Date(),tag:[]},tagList:[],shouldOpenTagDialog:false};_this.addNewTodo=function(values){addTodo(_objectSpread({},values)).then(function(){_this.props.history.push(\"/todo/list\");});};_this.updateTodo=function(todo){updateTodoById(todo);_this.setState({todo:_objectSpread(_objectSpread({},_this.state.todo),todo)});};_this.reloadTagList=function(){getAllTodoTag().then(function(_ref){var data=_ref.data;_this.setState({tagList:_toConsumableArray(data)});});};_this.addTagInTodo=function(id){var tag=_this.state.todo.tag;if(!tag.includes(id)){tag.push(id);_this.setState({todo:_objectSpread(_objectSpread({},_this.state.todo),{},{tag:tag})});}};_this.handleTagDelete=function(tagId){var _this$state$todo$tag=_this.state.todo.tag,tagList=_this$state$todo$tag===void 0?[]:_this$state$todo$tag;tagList=tagList.filter(function(id){return id!==tagId;});_this.setState({todo:_objectSpread(_objectSpread({},_this.state.todo),{},{tag:_toConsumableArray(tagList)})},function(){return updateTodoById(_objectSpread({},_this.state.todo));});};_this.handleTodoDelete=function(){deleteTodo(_objectSpread({},_this.state.todo)).then(function(){_this.props.history.push(\"/todo/list\");});};_this.handleSubmit=function(values){var todoId=_this.props.match.params.id;if(todoId===\"add\"){_this.addNewTodo(values);}else{updateTodoById(_objectSpread(_objectSpread({},_this.state.todo),values)).then(function(){_this.props.history.push(\"/todo/list\");});}};_this.handleTagDialogToggle=function(){_this.setState({shouldOpenTagDialog:!_this.state.shouldOpenTagDialog});};return _this;}_createClass(TodoEditor,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var todoId=this.props.match.params.id;getAllTodoTag().then(function(_ref2){var tagList=_ref2.data;if(todoId!==\"add\"){getTodoById(todoId).then(function(_ref3){var data=_ref3.data;if(!data){_this2.props.history.push(\"/todo/list\");return;}_this2.setState({todo:_objectSpread({},data),tagList:_toConsumableArray(tagList)});});}else{_this2.setState({tagList:tagList});}});}},{key:\"render\",value:function render(){var _this3=this;var _this$state$todo=this.state.todo,done=_this$state$todo.done,read=_this$state$todo.read,starred=_this$state$todo.starred,important=_this$state$todo.important,_this$state$todo$tag2=_this$state$todo.tag,tagIdList=_this$state$todo$tag2===void 0?[]:_this$state$todo$tag2;var tagList=this.state.tagList;return/*#__PURE__*/React.createElement(Card,{className:\"todo-editor position-relative m-sm-30\"},/*#__PURE__*/React.createElement(\"div\",{className:\"editor__topbar bg-light-gray p-2 d-flex flex-wrap card-header justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap align-items-center\"},/*#__PURE__*/React.createElement(Link,{to:\"/todo/list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 rounded-circle btn-hover\"},/*#__PURE__*/React.createElement(MdArrowBack,{size:24}))),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"checkbox checkbox-primary mb-0\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",name:\"agree\",checked:done,onChange:function onChange(){return _this3.updateTodo(_objectSpread(_objectSpread({},_this3.state),{},{done:!done}));}}),/*#__PURE__*/React.createElement(\"span\",null,\"Mark As \".concat(done?\"Und\":\"D\",\"one\")),/*#__PURE__*/React.createElement(\"span\",{className:\"checkmark\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-wrap\"},/*#__PURE__*/React.createElement(GullTooltip,{title:\"Mark As \".concat(read?\"Unr\":\"R\",\"ead\"),fontSize:\"large\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 rounded-circle btn-hover cursor-pointer mr-2\",onClick:function onClick(){return _this3.updateTodo(_objectSpread(_objectSpread({},_this3.state),{},{read:!read}));}},read?/*#__PURE__*/React.createElement(MdDrafts,{size:24}):/*#__PURE__*/React.createElement(MdMarkunread,{size:24}))),/*#__PURE__*/React.createElement(GullTooltip,{title:\"Mark As \".concat(important?\"Uni\":\"I\",\"mportant\"),fontSize:\"large\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 rounded-circle btn-hover  cursor-pointer mr-2\",onClick:function onClick(){return _this3.updateTodo(_objectSpread(_objectSpread({},_this3.state),{},{important:!important}));}},important?/*#__PURE__*/React.createElement(MdError,{className:\"text-danger\",size:24}):/*#__PURE__*/React.createElement(MdErrorOutline,{size:24}))),/*#__PURE__*/React.createElement(GullTooltip,{title:\"Mark As \".concat(starred?\"Uns\":\"S\",\"tarred\"),fontSize:\"large\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 rounded-circle btn-hover  cursor-pointer mr-2\",onClick:function onClick(){return _this3.updateTodo(_objectSpread(_objectSpread({},_this3.state),{},{starred:!starred}));}},starred?/*#__PURE__*/React.createElement(MdStar,{className:\"text-warning\",size:24}):/*#__PURE__*/React.createElement(MdStarBorder,{size:24}))),/*#__PURE__*/React.createElement(GullTooltip,{title:\"Manage tags\",fontSize:\"large\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 rounded-circle btn-hover  cursor-pointer mr-2\",onClick:this.handleTagDialogToggle},/*#__PURE__*/React.createElement(MdLibraryAdd,{size:24}))),/*#__PURE__*/React.createElement(Dropdown,null,/*#__PURE__*/React.createElement(Dropdown.Toggle,{as:\"span\",className:\"cursor-pointer toggle-hidden\"},/*#__PURE__*/React.createElement(GullTooltip,{title:\"Add tags\",fontSize:\"large\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 rounded-circle btn-hover\"},/*#__PURE__*/React.createElement(MdLabel,{size:24})))),/*#__PURE__*/React.createElement(Dropdown.Menu,null,this.state.tagList.map(function(tag){return/*#__PURE__*/React.createElement(Dropdown.Item,{className:\"text-capitalize\",key:tag.id,onClick:function onClick(){return _this3.addTagInTodo(tag.id);}},tag.name);}))),/*#__PURE__*/React.createElement(GullTooltip,{title:\"Delete\",fontSize:\"large\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 rounded-circle btn-hover  cursor-pointer mr-2\",onClick:this.handleTodoDelete},/*#__PURE__*/React.createElement(MdDelete,{size:24}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"editor__form p-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"my-3\"},tagIdList.map(function(tagId){var tagName=(tagList.find(function(tag){return tag.id===tagId;})||{}).name;if(!tagName)return null;else return/*#__PURE__*/React.createElement(\"div\",{className:\"badge badge-pill bg-gray-400 text-capitalize mr-2 pl-2\",key:tagId},/*#__PURE__*/React.createElement(\"div\",{className:\" d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-12\"},tagName),/*#__PURE__*/React.createElement(\"span\",{className:\"p-1 rounded-circle btn-hover\",onClick:function onClick(){return _this3.handleTagDelete(tagId);}},/*#__PURE__*/React.createElement(MdClose,{size:\"18\"}))));})),/*#__PURE__*/React.createElement(Formik,{initialValues:this.state.todo,validationSchema:todoSchema,enableReinitialize:true,onSubmit:this.handleSubmit},function(_ref4){var values=_ref4.values,errors=_ref4.errors,touched=_ref4.touched,handleChange=_ref4.handleChange,handleBlur=_ref4.handleBlur,handleSubmit=_ref4.handleSubmit,isSubmitting=_ref4.isSubmitting,setFieldValue=_ref4.setFieldValue;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,\"Title\"),/*#__PURE__*/React.createElement(FormControl,{className:\"mb-3 w-100\",label:\"Title*\",onChange:handleChange,onBlur:handleBlur,type:\"text\",name:\"title\",value:values.title,isInvalid:errors.title&&touched.title})),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,\"Put your notes\"),/*#__PURE__*/React.createElement(FormControl,{as:\"textarea\",className:\"mb-3 w-100\",onChange:handleChange,onBlur:handleBlur,type:\"text\",name:\"note\",value:values.note,isInvalid:errors.note&&touched.note})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"col-4\"},/*#__PURE__*/React.createElement(FormLabel,{className:\"mr-2\"},\"Start date\"),/*#__PURE__*/React.createElement(DatePicker,{className:\"form-control\",dateFormat:\"dd/MM/yyyy\",placeholderText:\"Start date\",selected:new Date(values.startDate),onChange:function onChange(date){setFieldValue(\"startDate\",date);}})),/*#__PURE__*/React.createElement(FormGroup,{className:\"col-4\"},/*#__PURE__*/React.createElement(FormLabel,{className:\"mr-2\"},\"Due date\"),/*#__PURE__*/React.createElement(DatePicker,{className:\"form-control\",dateFormat:\"dd/MM/yyyy\",placeholderText:\"Start date\",selected:new Date(values.dueDate),onChange:function onChange(date){setFieldValue(\"dueDate\",date);}}))),/*#__PURE__*/React.createElement(Link,{to:\"/todo/list\"},/*#__PURE__*/React.createElement(Button,{className:\"mr-3\",variant:\"outline-danger\",type:\"button\"},\"Cancel\")),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\"},\"Save\"));})),/*#__PURE__*/React.createElement(TagDialog,{reloadTagList:this.reloadTagList,open:this.state.shouldOpenTagDialog,handleClose:this.handleTagDialogToggle}));}}]);return TodoEditor;}(Component);var todoSchema=yup.object().shape({title:yup.string().required(\"title is required\"),note:yup.string().required(\"note is required\")});export default TodoEditor;","map":{"version":3,"sources":["/Users/arjun/Documents/Personal/Test/Theta/UI Theme/gull-admin/react/src/app/views/app/task-manager/todo/TodoEditor.jsx"],"names":["React","Component","Card","Button","Dropdown","FormControl","FormGroup","FormLabel","Link","getTodoById","getAllTodoTag","updateTodoById","deleteTodo","addTodo","DatePicker","Formik","yup","MdArrowBack","MdDrafts","MdMarkunread","MdError","MdErrorOutline","MdStar","MdStarBorder","MdLibraryAdd","MdLabel","MdDelete","MdClose","GullTooltip","TagDialog","TodoEditor","state","todo","title","note","done","read","starred","important","startDate","Date","dueDate","tag","tagList","shouldOpenTagDialog","addNewTodo","values","then","props","history","push","updateTodo","setState","reloadTagList","data","addTagInTodo","id","includes","handleTagDelete","tagId","filter","handleTodoDelete","handleSubmit","todoId","match","params","handleTagDialogToggle","tagIdList","map","name","tagName","find","todoSchema","errors","touched","handleChange","handleBlur","isSubmitting","setFieldValue","date","object","shape","string","required"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Card,\n  Button,\n  Dropdown,\n  FormControl,\n  FormGroup,\n  FormLabel\n} from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport {\n  getTodoById,\n  getAllTodoTag,\n  updateTodoById,\n  deleteTodo,\n  addTodo\n} from \"./todoService\";\nimport DatePicker from \"react-datepicker\";\nimport { Formik } from \"formik\";\nimport * as yup from \"yup\";\nimport {\n  MdArrowBack,\n  MdDrafts,\n  MdMarkunread,\n  MdError,\n  MdErrorOutline,\n  MdStar,\n  MdStarBorder,\n  MdLibraryAdd,\n  MdLabel,\n  MdDelete,\n  MdClose\n} from \"react-icons/md\";\nimport { GullTooltip } from \"@gull\";\nimport TagDialog from \"./TagDialog\";\n\nclass TodoEditor extends Component {\n  state = {\n    todo: {\n      title: \"\",\n      note: \"\",\n      done: false,\n      read: false,\n      starred: false,\n      important: false,\n      startDate: new Date(),\n      dueDate: new Date(),\n      tag: []\n    },\n    tagList: [],\n    shouldOpenTagDialog: false\n  };\n\n  componentDidMount() {\n    let { id: todoId } = this.props.match.params;\n\n    getAllTodoTag().then(({ data: tagList }) => {\n      if (todoId !== \"add\") {\n        getTodoById(todoId).then(({ data }) => {\n          if (!data) {\n            this.props.history.push(\"/todo/list\");\n            return;\n          }\n          this.setState({\n            todo: { ...data },\n            tagList: [...tagList]\n          });\n        });\n      } else {\n        this.setState({\n          tagList\n        });\n      }\n    });\n  }\n\n  addNewTodo = values => {\n    addTodo({ ...values }).then(() => {\n      this.props.history.push(\"/todo/list\");\n    });\n  };\n\n  updateTodo = todo => {\n    updateTodoById(todo);\n    this.setState({\n      todo: {\n        ...this.state.todo,\n        ...todo\n      }\n    });\n  };\n\n  reloadTagList = () => {\n    getAllTodoTag().then(({ data }) => {\n      this.setState({\n        tagList: [...data]\n      });\n    });\n  };\n\n  addTagInTodo = id => {\n    let { tag } = this.state.todo;\n    if (!tag.includes(id)) {\n      tag.push(id);\n      this.setState({\n        todo: {\n          ...this.state.todo,\n          tag\n        }\n      });\n    }\n  };\n\n  handleTagDelete = tagId => {\n    let { tag: tagList = [] } = this.state.todo;\n    tagList = tagList.filter(id => id !== tagId);\n    this.setState(\n      {\n        todo: {\n          ...this.state.todo,\n          tag: [...tagList]\n        }\n      },\n      () => updateTodoById({ ...this.state.todo })\n    );\n  };\n\n  handleTodoDelete = () => {\n    deleteTodo({ ...this.state.todo }).then(() => {\n      this.props.history.push(\"/todo/list\");\n    });\n  };\n\n  handleSubmit = values => {\n    let { id: todoId } = this.props.match.params;\n    if (todoId === \"add\") {\n      this.addNewTodo(values);\n    } else {\n      updateTodoById({ ...this.state.todo, ...values }).then(() => {\n        this.props.history.push(\"/todo/list\");\n      });\n    }\n  };\n\n  handleTagDialogToggle = () => {\n    this.setState({\n      shouldOpenTagDialog: !this.state.shouldOpenTagDialog\n    });\n  };\n\n  render() {\n    let {\n      done,\n      read,\n      starred,\n      important,\n      tag: tagIdList = []\n    } = this.state.todo;\n    let { tagList } = this.state;\n\n    return (\n      <Card className=\"todo-editor position-relative m-sm-30\">\n        <div className=\"editor__topbar bg-light-gray p-2 d-flex flex-wrap card-header justify-content-between align-items-center\">\n          <div className=\"d-flex flex-wrap align-items-center\">\n            <Link to=\"/todo/list\">\n              <div className=\"p-2 rounded-circle btn-hover\">\n                <MdArrowBack size={24}></MdArrowBack>\n              </div>\n            </Link>\n            <div className=\"ml-4\">\n              <label className=\"checkbox checkbox-primary mb-0\">\n                <input\n                  type=\"checkbox\"\n                  name=\"agree\"\n                  checked={done}\n                  onChange={() =>\n                    this.updateTodo({ ...this.state, done: !done })\n                  }\n                />\n                <span>{`Mark As ${done ? \"Und\" : \"D\"}one`}</span>\n                <span className=\"checkmark\"></span>\n              </label>\n            </div>\n          </div>\n          <div className=\"d-flex flex-wrap\">\n            <GullTooltip\n              title={`Mark As ${read ? \"Unr\" : \"R\"}ead`}\n              fontSize=\"large\"\n            >\n              <div\n                className=\"p-2 rounded-circle btn-hover cursor-pointer mr-2\"\n                onClick={() => this.updateTodo({ ...this.state, read: !read })}\n              >\n                {read ? (\n                  <MdDrafts size={24}></MdDrafts>\n                ) : (\n                  <MdMarkunread size={24}></MdMarkunread>\n                )}\n              </div>\n            </GullTooltip>\n\n            <GullTooltip\n              title={`Mark As ${important ? \"Uni\" : \"I\"}mportant`}\n              fontSize=\"large\"\n            >\n              <div\n                className=\"p-2 rounded-circle btn-hover  cursor-pointer mr-2\"\n                onClick={() =>\n                  this.updateTodo({ ...this.state, important: !important })\n                }\n              >\n                {important ? (\n                  <MdError className=\"text-danger\" size={24}></MdError>\n                ) : (\n                  <MdErrorOutline size={24}></MdErrorOutline>\n                )}\n              </div>\n            </GullTooltip>\n\n            <GullTooltip\n              title={`Mark As ${starred ? \"Uns\" : \"S\"}tarred`}\n              fontSize=\"large\"\n            >\n              <div\n                className=\"p-2 rounded-circle btn-hover  cursor-pointer mr-2\"\n                onClick={() =>\n                  this.updateTodo({ ...this.state, starred: !starred })\n                }\n              >\n                {starred ? (\n                  <MdStar className=\"text-warning\" size={24}></MdStar>\n                ) : (\n                  <MdStarBorder size={24}></MdStarBorder>\n                )}\n              </div>\n            </GullTooltip>\n\n            <GullTooltip title=\"Manage tags\" fontSize=\"large\">\n              <div\n                className=\"p-2 rounded-circle btn-hover  cursor-pointer mr-2\"\n                onClick={this.handleTagDialogToggle}\n              >\n                <MdLibraryAdd size={24}></MdLibraryAdd>\n              </div>\n            </GullTooltip>\n\n            <Dropdown>\n              <Dropdown.Toggle\n                as=\"span\"\n                className=\"cursor-pointer toggle-hidden\"\n              >\n                <GullTooltip title=\"Add tags\" fontSize=\"large\">\n                  <div className=\"p-2 rounded-circle btn-hover\">\n                    <MdLabel size={24}></MdLabel>\n                  </div>\n                </GullTooltip>\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                {this.state.tagList.map(tag => (\n                  <Dropdown.Item\n                    className=\"text-capitalize\"\n                    key={tag.id}\n                    onClick={() => this.addTagInTodo(tag.id)}\n                  >\n                    {tag.name}\n                  </Dropdown.Item>\n                ))}\n              </Dropdown.Menu>\n            </Dropdown>\n\n            <GullTooltip title=\"Delete\" fontSize=\"large\">\n              <div\n                className=\"p-2 rounded-circle btn-hover  cursor-pointer mr-2\"\n                onClick={this.handleTodoDelete}\n              >\n                <MdDelete size={24}></MdDelete>\n              </div>\n            </GullTooltip>\n          </div>\n        </div>\n\n        <div className=\"editor__form p-3\">\n          <div className=\"my-3\">\n            {tagIdList.map(tagId => {\n              let tagName = (tagList.find(tag => tag.id === tagId) || {}).name;\n              if (!tagName) return null;\n              else\n                return (\n                  <div\n                    className=\"badge badge-pill bg-gray-400 text-capitalize mr-2 pl-2\"\n                    key={tagId}\n                  >\n                    <div className=\" d-flex align-items-center\">\n                      <span className=\"text-12\">{tagName}</span>\n                      <span\n                        className=\"p-1 rounded-circle btn-hover\"\n                        onClick={() => this.handleTagDelete(tagId)}\n                      >\n                        <MdClose size=\"18\"></MdClose>\n                      </span>\n                    </div>\n                  </div>\n                );\n            })}\n          </div>\n\n          <Formik\n            initialValues={this.state.todo}\n            validationSchema={todoSchema}\n            enableReinitialize={true}\n            onSubmit={this.handleSubmit}\n          >\n            {({\n              values,\n              errors,\n              touched,\n              handleChange,\n              handleBlur,\n              handleSubmit,\n              isSubmitting,\n              setFieldValue\n            }) => (\n              <form onSubmit={handleSubmit}>\n                <FormGroup>\n                  <FormLabel>Title</FormLabel>\n                  <FormControl\n                    className=\"mb-3 w-100\"\n                    label=\"Title*\"\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    type=\"text\"\n                    name=\"title\"\n                    value={values.title}\n                    isInvalid={errors.title && touched.title}\n                  />\n                </FormGroup>\n\n                <FormGroup>\n                  <FormLabel>Put your notes</FormLabel>\n                  <FormControl\n                    as=\"textarea\"\n                    className=\"mb-3 w-100\"\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    type=\"text\"\n                    name=\"note\"\n                    value={values.note}\n                    isInvalid={errors.note && touched.note}\n                  />\n                </FormGroup>\n\n                <div className=\"row mb-3\">\n                  <FormGroup className=\"col-4\">\n                    <FormLabel className=\"mr-2\">Start date</FormLabel>\n                    <DatePicker\n                      className=\"form-control\"\n                      dateFormat=\"dd/MM/yyyy\"\n                      placeholderText=\"Start date\"\n                      selected={new Date(values.startDate)}\n                      onChange={date => {\n                        setFieldValue(\"startDate\", date);\n                      }}\n                    />\n                  </FormGroup>\n                  <FormGroup className=\"col-4\">\n                    <FormLabel className=\"mr-2\">Due date</FormLabel>\n                    <DatePicker\n                      className=\"form-control\"\n                      dateFormat=\"dd/MM/yyyy\"\n                      placeholderText=\"Start date\"\n                      selected={new Date(values.dueDate)}\n                      onChange={date => {\n                        setFieldValue(\"dueDate\", date);\n                      }}\n                    />\n                  </FormGroup>\n                </div>\n                <Link to=\"/todo/list\">\n                  <Button\n                    className=\"mr-3\"\n                    variant=\"outline-danger\"\n                    type=\"button\"\n                  >\n                    Cancel\n                  </Button>\n                </Link>\n                <Button variant=\"primary\" type=\"submit\">\n                  Save\n                </Button>\n              </form>\n            )}\n          </Formik>\n        </div>\n        <TagDialog\n          reloadTagList={this.reloadTagList}\n          open={this.state.shouldOpenTagDialog}\n          handleClose={this.handleTagDialogToggle}\n        />\n      </Card>\n    );\n  }\n}\n\nconst todoSchema = yup.object().shape({\n  title: yup.string().required(\"title is required\"),\n  note: yup.string().required(\"note is required\")\n});\n\nexport default TodoEditor;\n"]},"metadata":{},"sourceType":"module"}